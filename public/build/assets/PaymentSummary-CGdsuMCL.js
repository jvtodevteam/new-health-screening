import{r as h,R as u,j as e}from"./app-ClWzvfuZ.js";import{u as p}from"./useTranslation-ia2vs2-L.js";import{X as y}from"./x-D7i2mKT4.js";import{A as w}from"./arrow-left-CU7khLPQ.js";import{C as v}from"./circle-alert-CLE5aa2G.js";import"./createLucideIcon-DNKM7-_k.js";const _=({onClose:t,onLogin:r,isProcessing:l=!1})=>{const{t:n}=p(),[c,g]=h.useState(!1),o=()=>{g(!0);const s=600,d=600,i=(window.innerWidth-s)/2,m=(window.innerHeight-d)/2,x=window.open("/auth/google?ref=popup","googleLoginWindow",`width=${s},height=${d},top=${m},left=${i},menubar=no,toolbar=no,location=no,status=no`),a=setInterval(()=>{x&&x.closed&&(localStorage.getItem("google_login_success")==="true"?(localStorage.removeItem("google_login_success"),clearInterval(a),r()):localStorage.getItem("google_login_failed")==="true"&&(localStorage.removeItem("google_login_failed"),clearInterval(a),g(!1)))},500);window.loginCheckInterval=a};return u.useEffect(()=>()=>{window.loginCheckInterval&&clearInterval(window.loginCheckInterval)},[]),u.useEffect(()=>{if(new URLSearchParams(window.location.search).get("auth_success")==="true"){const i=window.location.pathname;window.history.replaceState({},document.title,i),r()}},[r]),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end justify-center sm:items-center",children:e.jsx("div",{className:"bg-white rounded-t-xl sm:rounded-xl w-full max-w-md animate-slide-up",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n.loginToContinue}),e.jsx("button",{onClick:t,className:"text-gray-500",children:e.jsx(y,{size:24})})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("button",{onClick:o,className:"w-full bg-white border border-gray-300 py-3 px-6 rounded-xl flex items-center justify-center space-x-2 font-medium hover:bg-gray-50 transition-colors",disabled:l||c,children:l||c?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin mr-2"}),n.processing]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"/assets/img/google.png",alt:"Google logo",className:"w-5 h-5"}),e.jsx("span",{className:"text-gray-700",children:n.loginWithGoogle})]})}),e.jsxs("button",{className:"w-full bg-black text-white py-3 px-6 rounded-xl flex items-center justify-center space-x-2 font-medium",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18",fill:"white",className:"mr-2",children:e.jsx("path",{d:"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"})}),e.jsx("span",{children:n.loginWithApple})]})]}),e.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[e.jsx("p",{children:n.continueAgreement}),e.jsxs("div",{className:"flex justify-center space-x-1",children:[e.jsx("a",{href:"/terms",className:"text-green-500",children:n.terms}),e.jsx("span",{children:"&"}),e.jsx("a",{href:"/privacy",className:"text-green-500",children:n.privacy})]})]})]})})})},E=({data:t,setData:r,errors:l,isProcessing:n,onSubmit:c,onBack:g,auth:o})=>{const{t:s}=p(),[d,i]=h.useState(!1),[m,x]=h.useState(!1),a=35e3,j=0,f=()=>a*t.participants.length+j,b=()=>{if(!(o!=null&&o.user)&&t.terms_agreed){i(!0);return}x(!0),c()},N=()=>{console.log("Login success - submitting form directly"),i(!1),x(!0),setTimeout(()=>{console.log("Calling onSubmit function"),c()},50)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"bg-white p-4 flex items-center shadow-sm",children:[e.jsx("button",{onClick:g,className:"mr-2",children:e.jsx(w,{size:24,className:"text-gray-800"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:s.summary})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[e.jsx("h2",{className:"font-bold text-lg mb-4 text-gray-800",children:s.screeningDetails}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg mb-3",children:[e.jsx("span",{className:"text-gray-700",children:s.location}),e.jsx("span",{className:"font-medium",children:t.location_name||"Selected Location"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg mb-3",children:[e.jsx("span",{className:"text-gray-700",children:s.date}),e.jsx("span",{className:"font-medium",children:t.date})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg mb-3",children:[e.jsx("span",{className:"text-gray-700",children:s.time}),e.jsx("span",{className:"font-medium",children:t.time_slot_start&&t.time_slot_end?`${t.time_slot_start} - ${t.time_slot_end}`:"Selected Time"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg mb-3",children:[e.jsx("span",{className:"text-gray-700",children:s.participants}),e.jsx("span",{className:"font-medium",children:t.participants.length})]}),e.jsx("h2",{className:"font-bold text-lg my-4 text-gray-800",children:s.payment}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer",onClick:()=>r("payment_method","card"),children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-500 flex items-center justify-center mr-3",children:t.payment_method==="card"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.creditCard}),e.jsx("p",{className:"text-xs text-gray-500",children:s.instantVerification})]}),e.jsx("div",{className:"flex space-x-1",children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/1280px-Mastercard-logo.svg.png",alt:"Mastercard",className:"h-8 w-auto object-contain"})})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer",onClick:()=>r("payment_method","qris"),children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-500 flex items-center justify-center mr-3",children:t.payment_method==="qris"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.qrisPayment}),e.jsx("p",{className:"text-xs text-gray-500",children:s.instantVerification})]}),e.jsx("div",{children:e.jsx("img",{src:"https://eg9mp7d8pz2.exactdn.com/wp-content/uploads/2022/12/QRIS__Quick_Response_Code_Indonesia_Standard__Logo__PNG2160p__-_Vector69Com-removebg-preview.png?strip=all&lossy=1&webp=85&ssl=1",alt:"QRIS",className:"h-6 w-auto object-contain"})})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer",onClick:()=>r("payment_method","ovo"),children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-500 flex items-center justify-center mr-3",children:t.payment_method==="ovo"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.ovoPayment}),e.jsx("p",{className:"text-xs text-gray-500",children:s.instantVerification})]}),e.jsx("div",{children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/eb/Logo_ovo_purple.svg/2560px-Logo_ovo_purple.svg.png",alt:"OVO",className:"h-5 w-auto object-contain"})})]}),e.jsx("div",{className:"pt-2 pb-1",children:e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:s.virtualAccount})}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer",onClick:()=>r("payment_method","bni"),children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-500 flex items-center justify-center mr-3",children:t.payment_method==="bni"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.bniVirtualAccount}),e.jsx("p",{className:"text-xs text-gray-500",children:s.instantVerification})]}),e.jsx("div",{children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/id/thumb/5/55/BNI_logo.svg/1200px-BNI_logo.svg.png",alt:"BNI",className:"h-5 w-auto object-contain"})})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer",onClick:()=>r("payment_method","bri"),children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-500 flex items-center justify-center mr-3",children:t.payment_method==="bri"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.briVirtualAccount}),e.jsx("p",{className:"text-xs text-gray-500",children:s.instantVerification})]}),e.jsx("div",{children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/68/BANK_BRI_logo.svg/2560px-BANK_BRI_logo.svg.png",alt:"BRI",className:"h-5 w-auto object-contain"})})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer",onClick:()=>r("payment_method","mandiri"),children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-green-500 flex items-center justify-center mr-3",children:t.payment_method==="mandiri"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.mandiriVirtualAccount}),e.jsx("p",{className:"text-xs text-gray-500",children:s.instantVerification})]}),e.jsx("div",{children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/ad/Bank_Mandiri_logo_2016.svg",alt:"Mandiri",className:"h-5 w-auto object-contain"})})]}),l.payment_method&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.payment_method})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-700",children:s.screeningFee}),e.jsxs("span",{children:["Rp ",a.toLocaleString()," x"," ",t.participants.length]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg mt-4",children:[e.jsx("span",{children:s.total}),e.jsxs("span",{children:["Rp ",f().toLocaleString()]})]})]}),e.jsxs("div",{className:"mb-4 mt-6",children:[e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(v,{size:18,className:"text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-yellow-800",children:s.dataExpiryWarning})]})}),e.jsxs("div",{className:"flex items-start cursor-pointer",onClick:()=>r("terms_agreed",!t.terms_agreed),children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{type:"checkbox",checked:t.terms_agreed,onChange:()=>r("terms_agreed",!t.terms_agreed),className:"w-4 h-4 border border-gray-300 rounded accent-green-500"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsxs("label",{className:"text-gray-700",children:[s.agreeToTerms,e.jsx("a",{href:route("terms"),className:"text-green-500 hover:underline ml-1",children:s.terms}),s.and,e.jsx("a",{href:route("privacy"),className:"text-green-500 hover:underline ml-1",children:s.privacy})]})})]}),l.terms_agreed&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.terms_agreed})]}),e.jsx("button",{onClick:b,className:`w-full ${t.terms_agreed&&t.payment_method?"bg-green-500 text-white":"bg-gray-300 text-gray-500"} py-3 rounded-xl font-medium`,disabled:!t.terms_agreed||!t.payment_method||m||n,children:m||n?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),s.processing]}):s.submit})]})}),d&&e.jsx(_,{onClose:()=>i(!1),onLogin:N,isProcessing:m})]})};export{E as default};
