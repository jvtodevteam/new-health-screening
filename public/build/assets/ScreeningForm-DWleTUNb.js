import{r as a,S as y,j as o,a as j,R as P}from"./app-r-sbB5L-.js";import b from"./Layout-D2wIZO5Q.js";import d from"./LocationSelection-C9nTlYv5.js";import T from"./ParticipantInfo-DZyKUsOF.js";import E from"./PaymentSummary-BfJuOSCw.js";import F from"./SuccessScreen-DyuKOM3z.js";import{u as R}from"./useTranslation-Dk4TTRaU.js";import"./house-BSojyFsl.js";import"./createLucideIcon-Dxth2Oq3.js";import"./heart-DEfgWtfI.js";import"./map-DlTu_djp.js";import"./user-DU9d6-q-.js";import"./leaflet-CoQeJxKL.js";import"./index-CE8bNrm6.js";import"./arrow-left-CmYeyI9Z.js";import"./map-pin-CIvOHqzk.js";import"./search-C21XcFr3.js";import"./chevron-right-D5CQYMkM.js";import"./chevron-up-DJa1_Zox.js";import"./chevron-down-6Ndvjo-s.js";import"./x-yUdmIKux.js";import"./plus-Bvfcwmpf.js";import"./dollar-sign-JX29NzX3.js";import"./circle-alert-RuhEsQT8.js";import"./circle-check-big-B_AnNJdJ.js";const ot=({cities:c,nationalities:f,initialTimeSlots:m,auth:S})=>{const{t:l}=R(),[r,t]=a.useState(1),[w,e]=a.useState(!1),{data:s,setData:i,post:u,errors:n}=y({location_id:"",date:new Date().toISOString().split("T")[0],time_slot_id:"",participants:[{title:"Mr",name:"",birth_year:"",nationality_id:"",id_number:"",has_medical_history:!1,allergies:"",past_medical_history:"",current_medications:"",family_medical_history:""}],payment_method:"spot",terms_agreed:!1});a.useEffect(()=>{if(new URLSearchParams(window.location.search).get("auth_success")==="true"&&r===3){const x=window.location.pathname;window.history.replaceState({},document.title,x),_()}},[]);const h=()=>{console.log("Form submission handler called"),e(!0),u("/screenings",{onSuccess:()=>{console.log("Form submission successful"),t(4),e(!1)},onError:p=>{console.log("Form submission error:",p),e(!1)}})},_=()=>{e(!0),u("/screenings",{onSuccess:()=>{t(4),e(!1)},onError:()=>{e(!1)}})},g=()=>{switch(P.useEffect(()=>{window.scrollTo(0,0)},[r]),r){case 1:return o.jsx(d,{data:s,setData:i,errors:n,cities:c,initialTimeSlots:m,onNext:()=>{window.scrollTo(0,0),t(2)}});case 2:return o.jsx(T,{data:s,setData:i,nationalities:f,errors:n,onNext:()=>{window.scrollTo(0,0),t(3)},onBack:()=>{window.scrollTo(0,0),t(1)}});case 3:return o.jsx(E,{data:s,setData:i,errors:n,isProcessing:w,onSubmit:h,onBack:()=>{window.scrollTo(0,0),t(2)},auth:S});case 4:return o.jsx(F,{});default:return o.jsx(d,{data:s,setData:i,errors:n,cities:c,initialTimeSlots:m,onNext:()=>{window.scrollTo(0,0),t(2)}})}};return o.jsxs(b,{children:[o.jsx(j,{title:`${l.healthScreening} - ${l[`step${r}Title`]}`}),g()]})};export{ot as default};
